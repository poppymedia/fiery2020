{% comment %}
  This is the store password page and only displays when the store is password protected.
{% endcomment %}

{% comment %}
  The share buttons share the home page URL. The share text is grabbed from the store
  meta description.
{% endcomment %}

<main role="main" id="MainContent">

{% if section.settings.password_titles == true %}
<h2>{{ 'general.password_page.title' | t }}</h2>
{% endif %}

{% if section.settings.password_message == 'preferences' %}
{% unless shop.password_message == blank %}
  <p>{{ shop.password_message }}</p>
{% endunless %}
{% elsif section.settings.password_message == 'language' %}
  <p>{{ 'general.password_page.message' | t }}</p>
{% endif %}

{% if section.settings.password_signup == true %}
{% form 'customer' %}
  {{ form.errors | default_errors }}

  {% if form.posted_successfully? %}
    <ul class="form-success">
      <li>{{ 'general.password_page.signup_form_success' | t }}</li>
    </ul>
  {% else %}
    <h3>{{ 'general.password_page.signup_form_title' | t }}</h3>
    <input type="hidden" name="contact[tags]" value="prospect, password page">
    <label for="email" class="visually-hidden">
      {{ 'general.password_page.signup_form_email_label' | t }}
    </label>
    <input type="email"
      name="contact[email]"
      id="Email"
      spellcheck="false"
      autocomplete="off"
      autocapitalize="off"
      placeholder="{{ 'general.password_page.signup_form_email_placeholder' | t }}">
    <button type="submit" name="commit" class="btn">
      {{ 'general.password_page.signup_form_submit' | t }}
    </button>
  {% endif %}
{% endform %}
{% endif %}

{% if section.settings.password_social_sharing %}
  {% include 'social-sharing' %}
{% endif %}
    
    
  </main>

  {% if section.settings.password_show_admin_login %}
  <div id="Login">
    <h3>{{ 'general.password_page.login_form_title' | t }}</h3>
    {% form 'storefront_password' %}
      {{ form.errors | default_errors }}
      <label for="password" class="visually-hidden">{{ 'general.password_page.login_form_password_label' | t }}</label>
      <input type="password"
        name="password"
        id="Password"
        placeholder="{{ 'general.password_page.login_form_password_placeholder' | t }}">
      <button type="submit" name="commit" class="btn">
        {{ 'general.password_page.login_form_submit' | t }}
      </button>
    {% endform %}      
    <p><small>{{ 'general.password_page.admin_link_html' | t }}</small></p>    
  </div>
  {% endif %}

  {% if section.settings.password_show_powered_by %}
  <footer>    
    {% capture shopify_link %}
      <a href="//www.shopify.com" target="_blank" title="{{ 'general.site.create_your_store_title' |t }}">
        {% include 'icon-shopify-logo' %}
        <span class="icon-fallback-text">{{ 'general.site.business_label' |t }}</span>
      </a>
    {% endcapture %}
    <p><small>{{ 'general.site.powered_by_shopify_html' | t: shopify: shopify_link }}</small></p>
  </footer>
  {% endif %}


{% schema %}
  {
    "name": "Body",
    "settings": [
      {
        "type": "checkbox",
        "id": "password_headings",
        "label": "Show heading",
        "default": false
      },
      {
        "type": "checkbox",
        "id": "password_signup",
        "label": "Show signup form",
        "default": false
      },
      {
        "type": "checkbox",
        "id": "password_show_admin_login",
        "label": "Show password form",
        "default": false
      },
      {
        "type": "checkbox",
        "id": "password_social_sharing",
        "label": "Show social share links",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "password_show_powered_by",
        "label": "Show powered by link",
        "default": true
      },
      {
        "type": "select",
        "id": "password_message",
        "label": "Show message",
        "options": [
          {
            "value": "none",
            "label": "No text"
          },
          {
            "value": "language",
            "label": "Use language text"
          },
          {
            "value": "preferences",
            "label": "Use preferences text"
          }
        ],
        "default": "preferences"
      }
	]
  }
{% endschema %}
