{% include 'settings' %}
{% assign mobile_width = grid_mobile %}


  <style>
  {% if section.settings.separator_width == 'container' %}
  @media only screen and (min-width: {{ mobile_width | remove: 'px' | append: 'px' }}) {
  #shopify-section-{{ section.id }} .container {
    padding: 0;
  }
  }
  {% endif %}
    
  #shopify-section-{{ section.id }} {  
    overflow: hidden;  
    /* border: solid 1px white; */
    
    {% if section.settings.separator_width == 'overflow' or section.settings.separator_width == 'page' %}
    position: relative;
    {% if section.settings.image_position != 'hidden' %}
    {% assign bgsize = 1000 | append: 'x' %}
    background-image: url('{{ section.settings.image_bg | img_url: bgsize }}');
      
      
    {% if section.settings.image_parallax %}
    background-position: center -1px; 
      
    {% if section.settings.image_position == 'center' %}    
    background-repeat: no-repeat;
    {% endif %}
    {% if section.settings.image_position == 'tile' %}
    background-repeat: repeat;
    {% endif %}
    {% if section.settings.image_position == 'fill' %}   
    background-size: cover;
    {% endif %}        
      
    {% else %}
      
    {% if section.settings.image_position == 'center' %}    
    background-position: center center; 
    background-repeat: no-repeat;
    {% endif %}
    {% if section.settings.image_position == 'tile' %}
    background-position: center center; 
    background-repeat: repeat;
    {% endif %}
    {% if section.settings.image_position == 'fill' %}   
    background-position: center center; 
    background-size: cover;
    {% endif %}
      
    {% endif %}      
      

      
    {% endif %}      
    background-color: {{ section.settings.separator_bg }};
    {% endif %}
  }  
    
    
  {% if section.settings.separator_width == 'overflow' or section.settings.separator_width == 'page' %}
  #shopify-section-{{ section.id }}:before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;  
      background-color: {{ section.settings.separator_bg }};  
      opacity: {{ section.settings.image_opacity | divided_by: 100.00 }};
  }
  {% endif %}

    
  #shopify-section-{{ section.id }} .container { 
    overflow: hidden;   
    /* border: solid 1px black; */   
    
  }  
  #shopify-section-{{ section.id }} .container .separator {  
    overflow: hidden;  
    /* border: solid 1px red; */
  }   

  {% if section.settings.separator_width == 'overflow' %}
  #shopify-section-{{ section.id }} .container {    
    background: transparent; 
    padding: 0 !important;
  }    
  {% endif %}    
    
  #shopify-section-{{ section.id }} .separator {
  	/* Default to same as settings.grid_spacing */
    grid-gap: {{ section.settings.separator_spacing }}px;
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: 1fr;
    {% unless section.settings.separator_autoplay %}
    {% endunless %}
    font-size: {{ settings.separator_font_size }}px;

    {% if section.settings.separator_width != 'overflow' or section.settings.separator_width == 'page' %}
    {% if section.settings.image_type == 'background' %}
    background-size: cover;
    {% else %}
    background-color: {{ section.settings.separator_bg }};
    {% endif %}
    {% endif %}
    
    
    
    {% if section.settings.separator_width == 'container' or section.settings.separator_width == 'content' or section.settings.separator_width == 'page' %}
    {% if section.settings.image_position != 'hidden' %}
    {% assign bgsize = 1000 | append: 'x' %}
    background-image: url('{{ section.settings.image_bg | img_url: bgsize }}');
      
      
    {% if section.settings.image_parallax %}
    background-position: center -1px; 
      
    {% if section.settings.image_position == 'center' %}    
    background-repeat: no-repeat;
    {% endif %}
    {% if section.settings.image_position == 'tile' %}
    background-repeat: repeat;
    {% endif %}
    {% if section.settings.image_position == 'fill' %}   
    background-size: cover;
    {% endif %}      
      
    {% else %}  
      
    {% if section.settings.image_position == 'center' %}    
    background-position: center center; 
    background-repeat: no-repeat;
    {% endif %}
    {% if section.settings.image_position == 'tile' %}
    background-position: center center; 
    background-repeat: repeat;
    {% endif %}
    {% if section.settings.image_position == 'fill' %}   
    background-position: center center; 
    background-size: cover;
    {% endif %}
      
    {% endif %} 
      
      
      
    {% endif %}      
    background-color: {{ section.settings.separator_bg }};
    {% endif %}     
    
  }

  {% if section.settings.separator_width == 'container' or section.settings.separator_width == 'content' or section.settings.separator_width == 'page' %}
  #shopify-section-{{ section.id }} .separator:before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;  
      background-color: {{ section.settings.separator_bg }};  
      opacity: {{ section.settings.image_opacity | divided_by: 100.00 }};
  }
  {% endif %}



  @media only screen and (max-width: {{ mobile_width | remove: 'px' | minus: 1 | append: 'px' }}) {
    {% if section.settings.per_row_mobile == 0 %}
    #shopify-section-{{ section.id }} .separator {
      display: none;
    } 
      #shopify-section-{{ section.id }} .container {
        margin: 0 !important;
        padding: 0 !important;
      }   
    {% endif %}
    
    {% unless section.settings.separator_width == 'content' %}
    #shopify-section-{{ section.id }} .container { 
      padding: 0 !important;    
    } 
    {% endunless %}
 

    {% if section.settings.per_row_mobile > 0 %}
      #shopify-section-{{ section.id }} .container {
        margin-top: 0 !important;
        padding-top: 0 !important;
      }
      {% if section.settings.per_row_mobile == 1 %}
      #shopify-section-{{ section.id }} .separator {
        display: block;
      }
      {% endif %}
      {% if section.settings.per_row_mobile == 2 %}
      #shopify-section-{{ section.id }} .separator {
      }    
      {% endif %}
    {% endif %}
    
  }
    
  </style>

	{% if section.settings.separator_width == 'container' or section.settings.separator_width == 'content' or section.settings.separator_width == 'overflow' %}<div class="container{% if settings.width_bleed_to_edge %} bleed{% endif %}">{% endif %}

    <div class="separator divider{% if section.settings.image_parallax %} parallax{% endif %}">
    	DIVIDE
    </div>

	{% if section.settings.separator_width == 'container' or section.settings.separator_width == 'content' or section.settings.separator_width == 'overflow' %}</div>{% endif %}




{% schema %}
  {
    "name": "Separator",
	"class": "parallax",
    "settings": [
      {
        "type": "select",
        "id": "separator_width",
        "label": "Width",
        "options": [
          {
            "value": "page",
            "label": "Page"
          },
          {
            "value": "overflow",
            "label": "Content Overflow"
          },
          {
            "value": "container",
            "label": "Content Container"
          },
          {
            "value": "content",
            "label": "Content Text"
          }
        ],
        "default": "content"
      },
      {
        "type": "select",
        "id": "separator_alignment",
        "label": "Alignment",
        "options": [
          {
            "value": "left",
            "label": "Left"
          },
          {
            "value": "center",
            "label": "Center"
          },
          {
            "value": "right",
            "label": "Right"
          }
        ],
        "default": "center"
      },
      {
        "type": "range",
        "id": "per_row",
        "min": 1,
        "max": 4,
        "step": 1,
        "label": "Columns on desktop",
        "default": 2
      },
      {
        "type": "range",
        "id": "per_row_mobile",
        "min": 0,
        "max": 2,
        "step": 1,
        "label": "Columns on mobile",
        "default": 1
      },
      {
         "type": "range",
         "id": "separator_spacing",
         "min": 0,
         "max": 50,
         "step": 10,
         "unit": "px",
         "label": "Column spacing",
         "default": 0
      },
      {
         "type": "range",
         "id": "separator_padding",
         "min": 0,
         "max": 50,
         "step": 5,
         "unit": "px",
         "label": "Column padding",
         "default": 10
      },
      {
        "type": "header",
        "content": "Images"
      },
      {
            "type": "select",
            "id": "image_type",
            "label": "Image type",
            "options": [
              {
                "value": "hidden",
                "label": "Hidden"
              },
              {
                "value": "icon",
                "label": "Icon"
              },
              {
                "value": "image",
                "label": "Image"
              },
              {
                "value": "background",
                "label": "Background"
              }
            ],
            "default": "icon"
      },
      {
             "type": "range",
             "id": "image_size",
             "min": 0,
             "max": 100,
             "step": 2,
             "unit": "%",
             "label": "Image size",
             "default": 10
      },
      {
        "type": "header",
        "content": "Colors"
      },
      {
        "type": "color",
        "id": "separator_bg",
        "label": "Background and overlay color",
        "default": "#ffffff"
      },
      {
            "type": "image_picker",
            "id": "image_bg",
            "label": "Background image"
      },
      {
            "type": "select",
            "id": "image_position",
            "label": "Background position",
            "options": [
              {
                "value": "hidden",
                "label": "Hidden"
              },
              {
                "value": "center",
                "label": "Center"
              },
              {
                "value": "tile",
                "label": "Tile"
              },
              {
                "value": "fill",
                "label": "Fill"
              }
            ],
            "default": "fill"
      },
      {
        "type": "range",
        "id": "image_opacity",
        "min": 0,
        "max": 100,
        "step": 5,
        "label": "Background overlay visibility",
        "default": 50
      },
      {
         "type": "checkbox",
         "id": "image_parallax",
         "label": "Show parallax",
         "default": true
      }
	],
    "presets": [
      {
        "name": "Separator",
        "category": "Content"
      }
    ]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}
